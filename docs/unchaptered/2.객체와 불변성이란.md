# 객체와 불변성이란

다음의 내용을 알고 설명할 수 있다.

- 기본형 데이터와 참조형 데이터
- JavaScript 형변환
- 불변 객체를 만드는 방법
- 얕은 복사와 깊은 복사

<hr>

## 1. 기본형 데이터와 참조형 데이터

JavaScript 에는 크게 두 가지 형태의 데이터가 존재합니다.

해당 부분에 대해서 다음의 관점에서 작성하였습니다.

- 1.1. 존재하는 유형?
- 1.2. 참조란 무엇인가?
- 1.3. 유형 별로 무엇이 다른가?
- 1.4. 유형 별로 무엇을 주의해야 하는가?
- 1.5. 유형 별로 어떤 것들이 있는가?

> 단, 모든 유형에 대해 서술하기 보다 주요 유형에 대해서 자세하게 서술하였습니다.

<hr>

### 1.1. 존재하는 유형

JavaScript 에는 다음과 같은 유형이 존재합니다.

- Primitive Type, 기본형 타입
- References Type, 참조형 타입

<hr>

### 1.2. 참조란 무엇인가

JavaScript 에서의 변수의 처리 프로세스
_파일에 함수가 없이 진행되었다고 가정하였을 때입니다._
- 1단계 : 식별자명 인식
- 2단계 : 메모리 구역에 `Key` 로 식별자명 저장
- 3단계 : 값 인식
- 4단계 : 메모리 구역에 `Value` 로 값 저장
- 5단계 : 메모리 구역에서 `Key` 로 식별자명을 탐색 이후 `Value` 가 저장된 주소값을 저장
결과적으로 식별자명에 저장된 것은 타입과 무관하게 `주소값` 입니다.

<hr>

### 1.3. 유형 별로 무엇이 다른가

부정확하지만 쉬운 설명은 `구조` 를 가지고 있는 집합체인지 여부입니다.

<hr>

#### 1.3.1. 더 나아가서... 🐌

더 정확한 분류는 메모리 구역 안에 `Key` 안에는 최외각의 식별자 명이 담기게 됩니다.

이때, `Value` 란에 어떤 유형의 정보가 담겨있느냐에 따라서 이 친구가 달라지게 됩니다.

1. Primitive Type 은 `Value` 란에 단수의 주소값이 들어가 있습니다.
2. References Type 은 `Value` 란에 다수의 주소값이 들어가 있습니다.

물론, 메모리 상의 활동은 JavaScript 의 머신, 실행 환경에 따라 달라질 수 있습니다.

다만, 구조를 가진 집합체냐 아니냐에 따라 분류할 수 있다는 점으로도 충분히 구분 지을 수 있을 것 같습니다.

<hr>

### 1.4. 유형 별로 무엇을 주의해야 하는가?

사실 기본형, `Primitive`, 의 경우에는 일반적인 프로그래밍 상의 주의사항 정도만 있습니다.

- 변하지 않는 수와 변하는 수를 const 와 let 등으로 구분하자.
- 하나의 변수를 재활용해서 쓰거나 값을 변경해서 사용하지 말자.

하지만 참조형, `References`, 의 경우에는 다음과 같은 부분들을 주의해야 합니다.

- const, let 은 바로 옆의 식별자 명에 새로운 주소값 할당 `가능 여부` 를 의미하므로, <br> 참조형으로 생성된 변수가 가지고 있는 `내부 변수` 들은 재 할당이 가능하다.
- 참조형으로 생성된 변수는 `const new_obj = obj` 의 방식으로 복사하면 안된다. <br> - `객체의 복사` 혹은 `구조분해할당` 등의 기법을 사용하지 않는다면, obj2 와 obj 는 같은 주소값을 가르키게 되어, 마치 동기화된 객체 처럼 취급된다. <br> 즉 하나를 수정하면, 나머지도 수정된다.

### 1.5. 유형 별로 어떤 것들이 있는가?

예를 들어, 대표적인 기본형, `Primitive`, 타입은 다음과 같습니다.

```javascript
'hello'     // string
34231       // number
true        // boolean
null        // null
undefined   // undefined
```

또 예를 들어, 대표적인 참조형, `References`, 타입은 다음과 같습니다.

```javascript
{}          // object
[]          // array
```

이렇듯, 특정한 구조를 가지고 있고 다수의 변수를 담을 수 있는 친구들이 일반적으로 참조형 타입으로 구분됩니다.


<hr>

## 2. JavaScript 형변환

모든 형변환을 다루는 것은 불필요하다고 생각했습니다.

따라서, 필요한 시점에 `JavaScript Convert string to number` 혹은 `JavaScript 문자열 숫자로 변환` 등의 키워드로 검색하여 사용하는 것이 옳을 것 같습니다.

주의할 점으로는 [1.JavaScript 만의 특성은 무엇일까.md]() 에서도 다뤘었던 0 과 1, undefined 등이 자동으로 `Boolean` 타입으로 변환되는 이슈가 있음을 인지하는 것입니다.

> 논란이 된, 해당 이슈 : [[Issue] Boolean 을 이용한 조건문 분기의 위험성](
https://github.com/unchaptered/algorithm/issues/5)

<hr>

## 3. 불변 객체를 만드는 방법

불변 객체란, 객체의 내부 값이 변경되지 않도록 조치해둔 객체입니다.

JavaScript 에서는 기본적으로 모든 참조형, `References`, 타입 객체들은 가변 상태입니다.

굳이, 불변 객체로 만들 것이라면 `Object.freeze()` 메서드를 통해서 만들 수 있습니다.

<hr>

## 4. 얕은 복사와 깊은 복사

- 얕은 복사 : 주소값만 복사
- 깊은 복사 : 값을 복사

주로 참조형, `References`, 타입에서 발생하는 이슈입니다.

### 4.1. 얉은 복사

```javascript
const obj = {
    username: 'unchaptered'
};

const obj2 = obj;
```

### 4.2. 깊은 복사

```javascript
const obj = {
    username: 'unchaptered'
};

const obj2 = { ...obj };
```